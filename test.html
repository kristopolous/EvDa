<script src=http://documentcloud.github.com/underscore/underscore-min.js></script>
<script src=evda.js></script>

<script>
var ev = EvDa();

// Register callbacks
ev.Event.test('one', function(value, meta){
  console.log('test', meta.key, meta)
  meta.callback(true);
});

ev.Event.after('one', function(value, meta){
  console.log('after', meta.key, meta)
});

ev.Data.onSet('one', function(value, meta){
  console.log('during', meta.key, meta);
});

// Do the set
ev.Data('one', 'two');

// RegExp based key matching
var prefix = 'pre';

// Set up a bunch of K/V pairs
for(var ix = 0; ix < 4; ix++) {
  ev.Data(prefix + ix, ix);
}

// List the ones that match the standard regexp
console.log('keys matching the regex: ', ev.Data(prefix + '.*'));

// Show the values.
_.each(ev.Data(prefix + '.*'), function(key) {
  console.log(key, ev.get(key));
});

ev.Data.incr('key')
console.log("Incremented key, got ", ev.Data('key'));
ev.Data.decr('key')
console.log("Decremented key, got ", ev.Data('key'));
ev.Data.decr('key')
console.log("Decremented key, got ", ev.Data('key'));
ev.Data.incr('key')
console.log("Incremented key, got ", ev.Data('key'));

</script>
