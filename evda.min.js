function EvDa(q){function g(a,b,d){if(n(arguments)==1){if(k(a)){var c={};h(a,function(a,b){c[b]=g(b,a,d,0,1)});h(c,function(b,d){_.isFunction(c[d])&&!_.isFunction(a[d])&&(a[d]=c[d]())});return a}else if(_.isArray(a))return _.map(a,function(a){return g(a,b,d)});return f[a]}return g[_.isFunction(b)?m:"set"].apply(this,arguments)}function o(a){h(a.$,function(b){e[b]=_.without(e[b],a)})}function i(a,b){if(k(a))return h(a,function(b,c){a[c]=i(c,b)}),a;j[a]&&(j[a](),j[a]=0);return b?a in f?b(f[a]):g(a,
b,r):a in f}var h=_.each,l=_.extend,k=_.isObject,n=_.size,m="on",r={once:1},f=q||{},j={},e={};h([m,"after","test"],function(a){g[a]=function(b,d,c){(d.$||(d.$=[])).push(a+b);(e[a+b]||(e[a+b]=[])).push(d);return l(d,c)}});return l(g,{db:f,events:e,unset:function(a){delete f[a]},del:o,isset:i,setter:function(a,b){j[a]=b;e["on"+a]&&i(a)},set:function(a,b,d,c,j){var i="test"+a,k=n(e[i]),l,p={meta:d||{},old:f[a],key:a,done:function(c){l|=c===false;--k||l||g.set(a,b,d,1)}};if(k&&!c)h(e[i],function(a){a(b,
p)});else return f[a]=b,c=function(){h((e[m+a]||[]).concat(e["after"+a]||[]),function(a){a.S||(a(b,p),a.once&&o(a))});return b},j?c:c();return b}})};
