function EvDa(B){function c(a,b,d){if(m(a))return C(a,function(a){return c.call(c.context,a,b,d)});if(1==arguments.length){if(v(a)){var k={};f(a,function(a,b){k[a]=c(a,b,d,0,1)});f(k,function(b,d){n(k[b])&&!n(a[b])&&(a[b]=k[b]())});return a}return e[a]}return c[n(b)?u:"set"].apply(this,arguments)}function z(a){f(a.$,function(b){h[b]=A(h[b],a)})}function p(a,b,d){if(m(a)){var k=a.pop();return p(k,function(c){var g={};g[k]=c;return p(1==a.length?a[0]:a,b,q({},g,d))})}if(v(a))return f(a,function(b,c){a[b]=
p(b,c,d)}),a;l[a]&&(l[a](function(b){c.set.call(c.context,a,b,d)}),delete l[a]);return b?a in e?b.call(c.context,e[a],d):c(a,b,q({},w,d||{})):a in e}var r=Array.prototype.slice,x=Object.prototype.toString,m=[].isArray||function(a){return"[object Array]"===x.call(a)},n=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},v=function(a){return""===a||a&&a.charCodeAt&&a.substr?!1:null==a?"object"==String(a):"[object Object]"===x.call(a)||!0},f=[].forEach?function(a,b){if(m(a)||a.length)r.call(a).forEach(b);
else for(var d in a)b(d,a[d])}:function(a,b){if(m(a))for(var d=0,c=a.length;d<c;d++)b(a[d],d);else for(d in a)b(d,a[d])},y={}.keys||function(a){if(m(a))return a;var b=[],d;for(d in a)b.push(d);return b},A=function(a,b){var d=[];f(a,function(a){a!==b&&d.push(a)});return d},E=function(a){var b,d=[];f(y(a).sort(),function(a){a!=b&&(b=a,d.push(a))});return d},F=function(a,b){var d=[];f(a,function(a){b(a)&&d.push(a)});return d},t=function(a){return a&&"length"in a?a.length:0},C=[].map?function(a,b){return a.map(b)}:
function(a,b){for(var d=[],c=0,e=a.length;c<e;c++)d.push(b(a[c],c));return d},q=function(a){f(r.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])});return a},u="on",w={},e=B||{},l={},h={};w.__once__lGx9BTY0Qf78CgAAsNdlZQik3bFlhvTISBLwAAaUasKQ=1;f([u,"after","test"],function(a){c[a]=function(b,c,e){c||(c=b,b="__base");(c.$||(c.$=[])).push(a+b);(h[a+b]||(h[a+b]=[])).push(c);return q(c,e)}});q(c,{context:this,list:{},db:e,setterMap:l,events:h,del:z,whenSet:p,isset:p,setter:function(a,
b){l[a]=b;if(h[u+a])return p(a)},when:function(a,b,d){return c(a,function(a){(m(b)&&b.sort().join("")===a.sort().join("")||n(b)&&b(a)||a===b)&&d.call(c.context,a)})},incr:function(a){return c.set(a,"[object Number]"===x.call(e[a])?e[a]+1:1)},decr:function(a){return c.set(a,e[a]-1||0)},push:function(a,b){1==t(arguments)&&(b=a,a="__base");return c.set(a,[].concat(e[a]||[],[b]))},pop:function(a){return c.set(a||"__base",e[a].slice(0,-1))},traceList:[],group:function(a){var b=r.call(arguments);a=b.shift();
b=c.apply(0,b);c.list[a]||(c.list[a]=[]);n(b)?c.list[a].push(b):f(b,function(b,e){c.list[a].push(b)});return function(){return c.group.apply(0,[a].concat(r.call(arguments)))}},set:function(a,b,d,k,D){var g="test"+a,p=r.call(arguments),n=t(h[g]),l,s=function(g){l|=!1===g;--n||l||c.set(a,b,d,1)};s.old=m(e[a])?r.call(e[a]):v(e[a])?q(e[a],{}):e[a];q(s,{meta:d||{},done:s,result:s,key:a});f(c.traceList,function(a){a.call(c.context,p)});if(n&&!k)f(h[g],function(a){a.call(c.context,b,s)});else return e[a]=
b,g=function(){f((h[u+a]||[]).concat(h["after"+a]||[]),function(a){a.S||(a.call(c.context,b,s),a.__once__lGx9BTY0Qf78CgAAsNdlZQik3bFlhvTISBLwAAaUasKQ&&z(a))});return b},D?g:g.call(c.context);return e[a]},once:function(a,b,d){return b?c.once(c(a,b,d)):q(a,w)},enable:function(a){f(c.list[a],function(b){b.S&&b.S[a]&&delete b.S[a];0==t(b.S)&&delete b.S});return c.list[a]},setadd:function(a,b){return c(a,E((e[a]||[]).concat([b])))},setdel:function(a,b){return c(a,A(e[a]||[],b))},disable:function(a){f(c.list[a],
function(b){(b.S||(b.S={}))[a]=!0});return c.list[a]},unset:function(){var a=!0;f(arguments,function(b){a&=b in e;delete e[b]});return a},find:function(a){return F(y(e),function(b){return b.match(a)})},changed:function(a,b){b||(b=a,a="__base");return c.on(a,function(a,e){var f=t(a),g=t(e.old);1==f-g?b.call(c.context,a.length?a[a.length-1]:void 0):f>g&&b.call(c.context,r.call(a).slice(g))})},sniff:function(){var a={},b=+new Date,d=function(c){a[c[0]]||console.log(+new Date-b,c)},e=function(){},f=d;
c.traceList.unshift(function(a){f(a)});c.sniff=function(b){if(0<arguments.length){if(""===b||b&&b.charCodeAt&&b.substr)return a[b]=!a[b],"[Un]ignoring "+b;f=b?d:e;return b}return y(a)}}});c.setAdd=c.setadd;c.setDel=c.setdel;c.isSet=c.isset;c.get=c;c.change=c.on;c.add=c.push;c.isArray=m;return c};
