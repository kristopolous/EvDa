function EvDa(q){function e(a,b,c){return m(arguments)==1?_.isObject(a)?(h(a,function(b,d){a[d]=e(d,b,c)}),a):f[a]:e[_.isFunction(b)?l:"set"](a,b,c)}function n(a){h(a.$,function(b){d[b]=_.without(d[b],a)})}function k(a,b){return i(e(a,b),{X:1})}function j(a,b){g[a]&&(g[a](),g[a]=0);return b?a in f?b(f[a]):k(a,b):a in f}var h=_.each,i=_.extend,m=_.size,l="on",f=q||{},g={},d={};h([l,"after","test"],function(a){e[a]=function(b,c){(c.$||(c.$=[])).push(a+b);(d[a+b]||(d[a+b]=[])).push(c);return c}});return i(e,
{db:f,events:d,unset:function(a){delete f[a]},del:n,once:k,isset:j,setter:function(a,b){g[a]=b;d["on"+a]&&j(a)},set:function b(c,e,g,k){var i="test"+c,j=m(d[i]),o,p={meta:g||{},old:f[c],key:c,done:function(d){o|=d===!1;--j||o||b(c,e,g,1)}};j&&!k?h(d[i],function(b){b(e,p)}):(f[c]=e,h((d[l+c]||[]).concat(d["after"+c]||[]),function(b){b(e,p);b.X&&n(b)}));return e}})};
