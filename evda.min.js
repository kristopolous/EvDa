function EvDa(o){function j(a,b,c){d[a]=b;i((f[g+a]||[]).concat(f[k+a]||[]),function(a){a(b,c);a.X&&l(a)})}function l(a){i(a.$,function(b){f[b]=_.without(f[b],a)})}function e(a,b,c){return m(arguments)==1?_.isObject(a)?(i(a,function(b,d){a[d]=e(d,b,c)}),a):d[a]:e[_.isFunction(b)?g:"set"](a,b,c)}var i=_.each,n=_.extend,m=_.size,g="on",k="after",d=o||{},h={},f={};i([g,k,"test"],function(a){e[a]=function(b,c){(c.$||(c.$=[])).push(a+b);(f[a+b]||(f[a+b]=[])).push(c);return c}});return n(e,{data:d,events:f,
once:function(a,b){return n(e[g](a,b),{X:1})},setter:function(a,b){h[a]=b;a in d&&e.isset(a)},isset:function(a,b){h[a]&&(h[a](),h[a]=0);return b?a in d?b(d[a]):e.once(a,b):a in d},set:function(a,b,c){var e="test"+a,g=m(f[e]),h,c={meta:c||{},old:d[a],key:a,done:function(d){--g||(h|=d===!1)||j(a,b,c)}};g?i(f[e],function(a){a(b,c)}):j(a,b,c);return b},unset:function(a){delete d[a]},del:l})};
