function EvDa(o){function j(a,b,c){d[a]=b;h((f[g+a]||[]).concat(f[k+a]||[]),function(a){a(b,c);a.X&&l(a)})}function l(a){h(a.$,function(b){f[b]=_.without(f[b],a)})}function e(a,b,c){return m(arguments)==1?_.isObject(a)?(h(a,function(b,d){a[d]=e(d,b,c)}),a):d[a]:e[_.isFunction(b)?g:"set"](a,b,c)}var h=_.each,n=_.extend,m=_.size,g="on",k="after",d=o||{},i={},f={};h([g,k,"test"],function(a){e[a]=function(b,c){(c.$||(c.$=[])).push(a+b);(f[a+b]||(f[a+b]=[])).push(c);return c}});return n(e,{data:d,events:f,
once:function(a,b){return n(e[g](a,b),{X:1})},setter:function(a,b){i[a]=b;a in d&&e.isset(a)},isset:function(a,b){i[a]&&(i[a](),i[a]=0);return b?a in d?b(d[a]):e.once(a,b):a in d},set:function(a,b,c){var e=m(f["test"+a]),g=0,c={meta:c||{},old:d[a],done:function(d){g+=d===!1;--e||g||j(a,b,c)},key:a};e?h(f["test"+a],function(a){a(b,c)}):j(a,b,c);return b},unset:function(a){delete d[a]},del:l})};
