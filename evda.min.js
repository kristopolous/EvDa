function EvDa(o){function e(a,b,d){return k(arguments)==1?_.isObject(a)?(g(a,function(b,c){a[c]=e(c,b,d)}),a):_.clone(c[a]):e[_.isFunction(b)?j:"set"](a,b,d)}function l(a){g(a.$,function(b){d[b]=_.without(d[b],a)})}function h(a,b){f[a]&&(f[a](),f[a]=0);return b?a in c?b(c[a]):e(a,b,p):a in c}var g=_.each,i=_.extend,k=_.size,j="on",p={once:1},c=o||{},f={},d={};g([j,"after","test"],function(a){e[a]=function(b,c,e){(c.$||(c.$=[])).push(a+b);(d[a+b]||(d[a+b]=[])).push(c);return i(c,e)}});return i(e,{db:c,
events:d,unset:function(a){delete c[a]},del:l,isset:h,setter:function(a,b){f[a]=b;d["on"+a]&&h(a)},set:function(a,b,e,f){var h="test"+a,i=k(d[h]),m,n={meta:e||{},old:c[a],key:a,done:function(c){m|=c===!1;--i||m||set(a,b,e,1)}};i&&!f?g(d[h],function(a){a(b,n)}):(c[a]=b,g((d[j+a]||[]).concat(d["after"+a]||[]),function(a){a(b,n);a.once&&l(a)}));return b}})};
