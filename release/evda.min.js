var module=module||{},EvDa=module.exports=function(){"use strict";var n=Array.prototype.slice,t=Object.prototype.toString,e=[].isArray||function(n){return"[object Array]"===t.call(n)},r=function(n){return!!(n&&n.constructor&&n.call&&n.apply)},u=function(n){return!!(""===n||n&&n.charCodeAt&&n.substr)},o=function(n){return"[object Number]"===t.call(n)},c=function(n){return u(n)||o(n)},i=function(n){return r(n)||u(n)||o(n)||e(n)?!1:null==n?"object"===String(n):"[object Object]"===t.call(n)||!0},a=function(t){return n.call(t)},l=[].forEach?function(n,t){if(c(n))return l([n],t);if(e(n)||n.length)a(n).forEach(t);else for(var r in n)t(r,n[r])}:function(n,t){if(c(n))return l([n],t);if(e(n))for(var r=0,u=n.length;u>r;r++)t(n[r],r);else for(var o in n)t(o,n[o])},f=function(n){return n.length?n[n.length-1]:void 0},s=function(n){var t=[];for(var e in n)t.push(n[e]);return t},v={}.keys||function(n){if(e(n))return n;var t=[];for(var r in n)t.push(r);return t},d=function(n,t){var e=[];return l(n,function(n){n!==t&&e.push(n)}),e},p=function(n){var t,e=[];return l(v(n).sort(),function(n){n!=t&&(t=n,e.push(n))}),e},h=function(n,t){var e=[];return l(n,function(n){t(n)&&e.push(n)}),e},g=function(n){return n&&"length"in n?n.length:0},x=[].map?function(n,t){return n.map(t)}:function(n,t){for(var e=[],r=0,u=n.length;u>r;r++)e.push(t(n[r],r));return e},y=function(t){return e(t)?n.call(t):i(t)?m(t,{}):t},m=function(t){return l(n.call(arguments,1),function(n){for(var e in n)void 0!==n[e]&&(t[e]=n[e])}),t},b=function(n){return n.match(/[?*]/)},k=function(n,t){return b(n)?h(v(t?t:data),function(t){return t.match(n)}):n},j=function(n,t){var r={};return e(n)?(l(n,function(n){r[n]=t(n)}),r):t(n)},w="first",_="on",A="after",D="test",E="or",O="set",P=function(){return!0},S=[w,_,A,D,E],C={once:1},F=function(t){function c(n){if(n in H)return H[n];var t=n.split("."),e=t.pop(),r=t.join(".");if(r){var u=c(r);if(i(u)&&e in u)return u[e]}}function R(t,u,o,a){var f=n.call(arguments);if(void 0===t)throw"Undefined passed in as first argument.";if(e(t))return f.shift(),x(t,function(n){return R.apply(R.context,[n].concat(f))});if(i(t)){if(1===f.length&&-1===t.constructor.toString().search(/{\s+\[native code\]\s+}/))return void(R.context=t);var s={};return a=o||{},o=u,a.noexec=1,l(t,function(n,t){s[n]=R(n,t,o,a)}),a.bypass||l(s,function(n,e){r(s[n])&&!r(t[n])&&(t[n]=s[n]())}),U(v(s)[0]),t}return 1===f.length?j(t,c):R[r(u)||e(u)&&r(u[0])?_:O].apply(this,f)}function K(n,t){$[n]||($[n]=[]),$[n].push(t||Z[n])}function L(n,t,e){Y[n]||(Y[n]=[]),Y[n].push([t,new Date,e]),Y[n].length>W&&Y[n].shift()}function M(n){l(n.ref,function(t){var e=b(t)?Q:Z;e[t]=d(e[t],n),K(t,n)})}function N(n,t,r){if(e(n)){var u,o=n.pop();return N(k(o),function(e,r){return u=1===n.length?n[0]:n,N(u,t,r)},r)}if(i(n))return l(n,function(t,e){b(t)?m(t,j(t,function(n){return N(t,e,r)})):n[t]=N(t,e,r)}),n;var c=O+n;return Z[c]&&(n in H||Z[c](function(t){R.set.call(R.context,n,t,r)}),K(c),delete Z[c]),t?(r=r||{},n in H?t.call(R.context,H[n],r):R[r.first?w:_](n,t,m(r,C))):n in H}function T(n,t,e,r){if(!n.norun){r.order++;var u=n.call(t,e,r,r.meta);return n.once&&M(n),n.ix++,n.last=new Date,u}}function U(t){var e=t.split("."),r=e.pop(),u=[];u[r]=H[t],R.extend.apply(R.context,[e.join("."),u].concat(n.call(arguments,1)))}function q(n,t,r,u,c){c=c||0;var i=x(e(n)?n:[n],function(n){var e=o(H[n])?H[n]:c;return R.set(n,t(e,r),u)});return e(n)?i:i[0]}function z(n,t,e,r,u){var o,c=Z[D+n]||[],i=-1,a=c.length+1,l=function(){var n=a,t=T(c[i],R.context,"_value"in v?v._value:v.value,v);n==a&&!!t===t&&v(t)},f=function(n,t){return L(n,t.value,["test:pass",t]),(e||P)(n,t)},s=function(t){return L(n,t.value,["test:fail",t]),(r||P)(t)},v=function(t){return o|=t===!1,a--,0>a?void 0:(a?(i++,u(v,!1)?l():s(v)):o?s(v):f(n,v),t)};return u=u||P,m(v,t,{done:v,result:v}),v(!0)}var B={},G={},H={},I={},J=[],Q={},V=[],W=10,X={},Y={},Z={},$={},nn={data:H,events:Z,removed:$,log:Y,lastReturn:X,locks:B,testLocks:G,trace:V,globs:Q};return l(S,function(t){R[t]=function(u,o,c){if(e(o)){var i=n.call(arguments,2);return x(o,function(n){return R[t].apply(R.context,[u,n].concat(i))})}var a=Z;return o?("ix"in o||m(o,{ref:[],ix:0,last:!1,line:[]}),o.ref.push(t+u),o.line.push((new Error).stack),b(u)&&(a=Q),(a[t+u]||(a[t+u]=[])).push(o),l(S,function(t){t in o||(o[t]=function(e){var c=n.call(arguments);return r(e)&&(c=[u].concat(c)),"len"in o||(o[0]=o,o.len=0),o.len++,o[o.len]=R[t].apply(R.context,c),o})}),m(o,c)):a[t+u]}}),q.add=function(n,t){return n+t},m(R,{_:{},context:this,list:{},isPaused:!1,isok:function(n,t){var e;return z(n,{_value:t,_isok:!0},function(){e=!0},function(){e=!1}),e},db:H,debug:function(n,t){if(!n)return nn;var e={lastReturn:X[n],lock:B[n],log:Y[n],value:H[n]};return t?(e.events=Z[t+n],e.removed=$[t+n]):(e.events=j(S.concat([O]),function(t){return Z[t+n]}),e.removed=j(S.concat([O]),function(t){return $[t+n]})),e},del:M,whenSet:N,isset:N,pause:function(){return R.isPaused?!1:(R.isPaused=!0,R._.set=R.set,R.set=function(){J.push([O,arguments])},!0)},play:function(){if(R.isPaused){R.isPaused=!1;var n=F();return R.set=R._.set,l(J,function(t){n[t[0]].apply(n,t[1])}),J=[],R(n.db),!0}return!1},setter:function(n,t){return Z[O+n]=t,Z[_+n]?N(n):void 0},when:function(t,o,c){if(i(t)){var a={},f={},v=function(n,t){f[t.key]=!1,t()},d=function(t,e){f[e.key]=!0,-1===s(f).indexOf(!1)&&o.apply(R.context,n.call(arguments))};return l(t,function(n,t){a[n+"-test"]=R.test(n,v),a[n]=R.when(n,t,d),f[n]=!1}),a}if(u(o))try{var p=new Function("x","return x"+o);p(),o=p}catch(h){}else if(2===arguments.length)return R.isset(t,o);return R(t,function(t){(e(o)&&o.sort().join("")===t.sort().join("")||r(o)&&o(t)||t===o)&&c.apply(R.context,n.call(arguments))})},empty:function(n){if(0===arguments.length)for(var n in H)delete H[n];else l(arguments,function(n){n in H&&(e(H[n])?R.set(n,[],{},{bypass:1,noexec:1}):R.set(n,null,{},{bypass:1,noexec:1}))})},incr:function(n,t,e){var r=u(t)?new Function("val","return val"+t):q.add;return q(n,r,t||1,e)},decr:function(n,t,e){return t=t||1,q(n,q.add,-(t||1),e,1)},push:function(n,t,e){return R.set(n,[].concat(H[n]||[],[t]),e)},pop:function(n,t){return R.set(n,H[n].slice(0,-1),t)},group:function(n){var t=a(arguments),n=t.shift(),e=R.apply(0,t);return R.list[n]||(R.list[n]=[]),r(e)?R.list[n].push(e):l(e,function(t,e){R.list[n].push(t)}),function(){return R.group.apply(0,[n].concat(a(arguments)))}},extend:function(t,e){return R.set.apply(R.context,[t,m({},H[t]||{},e)].concat(n.call(arguments,2)))},count:function(n){return 0===arguments.length?Math.max.apply(this,s(I)):I[n]},setContext:function(n){R.context=n},set:function(t,e,r,u){u=u||{};var o=u.bypass,c=u.coroutine||P,i="value"in u,a=u.noexec;if(1===arguments.length){var f=function(){R.set.apply(R.context,[t].concat(n.call(arguments)))};return R.set.call(R.context,t,void 0),f}if(B[t]>0)return l(V,function(n){n.call(R.context,m({locked:t},v))}),H[t];B[t]=(B[t]||0)+1;try{var s,v=n.call(arguments),d=g(Z[D+t])&&!o,p=function(n){n&&(x=n),l(Z[E+t]||[],function(n){T(n,R.context,i?u.value:x.value,x)})},h=function(n,t){c(t,!0)?R.set(n,t.value,t.meta,{bypass:1,order:t.order}):p()},x={};if(x.old=y(H[t]),m(x,{order:"order"in u?u.order:-1,meta:r||{},key:t,_value:i?u.value:x.value,value:e}),d)B[t]--,G[t]!==!0&&(G[t]=!0,z(t,x,h,p,c),G[t]=!1),s=H[t];else if(l(V,function(n){n.call(R.context,v)}),c(x,!0)&&(e=x.value,!u.onlychange||e!==H[t])){u.noset||(L(t,e,"set"),H[t]=e,""!=t&&(I[t]=(I[t]||0)+1));var b=arguments,k=function(){return l((Z[w+t]||[]).concat(Z[_+t]||[]),function(n){x.last=T(n,R.context,e,x)}),t.length>0&&(delete u.coroutine,U.apply(R.context,[t].concat(n.call(b,2)))),l(Z[A+t]||[],function(n){x.last=T(n,R.context,e,x)}),X[t]=x.last,e};a?(U.apply(R.context,[t].concat(n.call(b,2))),s=k):s=k.call(R.context)}}catch(j){throw j}finally{B[t]=0}return s},fire:function(n,t){l(n,function(n){R.set(n,H[n],t,{noset:!0})})},once:function(n,t,r){return i(n)&&(n=s(n)),e(n)?x(n,function(n){R.once.call(R.context,n,t,r)}):t?R.once(R(n,t,r)):m(n,C)},enable:function(n){return l(R.list[n],function(t){t.norun&&t.norun[n]&&delete t.norun[n],0===g(t.norun)&&delete t.norun}),R.list[n]},osetadd:function(n,t,r){var u=H[n]||[];return R(n,t,r,{coroutine:function(n,r){var o=e(n.value)?n.value:[n.value];return n.set=y(u),l(o,function(t){-1===n.set.indexOf(t)&&n.set.push(t)}),r&&(n.value=n.set),n.oper={name:"osetadd",value:t},u.length!=n.set.length}})},toggle:function(n){return R(n,!H[n])},setadd:function(n,t,r){var u=H[n]||[];return R(n,t,r,{coroutine:function(n,r){var o=e(n.value)?n.value:[n.value];return n.set=p(u.concat(o)),r&&(n.value=n.set),n.oper={name:"setadd",value:t},u.length!=n.set.length}})},settoggle:function(n,t,e){var r=-1===(H[n]||[]).indexOf(t)?"add":"del";return R[O+r](n,t,e)},setdel:function(n,t,e){var r=H[n]||[],u=d(r,t);return r.length!=u.length?R(n,u,e,{coroutine:function(n,e){return e&&(n.oper={name:"setdel",value:t}),!0},value:t}):u},disable:function(n){return l(R.list[n],function(t){(t.norun||(t.norun={}))[n]=!0}),R.list[n]},unset:function(){var n=!0;return l(arguments,function(t){n&=t in H;var e,r,u,o=t.split("."),c="",i=o.length,a=o[i-1];for(e=0;i>e;e++)if(c=o.slice(0,e).join("."),u=H[c]){for(r=e;i-1>r;r++)u=u[o[r]];delete u[a]}delete H[t]}),n},find:function(n){return h(v(H),function(t){return t.match(n)})},changed:function(n,t){return R.on(n,function(n,e){var r=g(n),u=g(e.old);r-u===1?t.call(R.context,f(n)):r>u&&t.call(R.context,a(n).slice(u))})},version:function(){return EvDa.version},sniff:function(){var t={"":1},e=function(n){return t[n[0]]||console.log(n)},r=function(){},o=e;return V.unshift(function(n){o(n)}),R.sniff=function(){var c=n.call(arguments),i=[];return l(c,function(n){u(n)?(t[n]?delete t[n]:t[n]=1,i.push([n,t[n]])):(o=n?e:r,i.push(n))}),c.length?i:v(t)},R.sniff.apply(R.context,arguments)}}),R.setAdd=R.setadd,R.setToggle=R.settoggle,R.osetAdd=R.osetadd,R.osetdel=R.setdel,R.osetDel=R.setdel,R.setDel=R.setdel,R.isSet=R.isset,R.whenset=R.isset,R.mod=R.incr,R.get=R,R.change=R.on,R.add=R.push,R.isOK=R.isok,l(F._ext,function(t,e){R[t]=function(){e.apply(R.context,[R].concat(n.call(arguments)))}}),arguments.length>0&&R(t),R};return F._ext={},F.extend=function(n,t){F._ext[n]=t},F.isArray=e,F}();EvDa.version="0.2.40-20160422";
//# sourceMappingURL=evda.map.js
