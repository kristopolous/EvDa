var module=module||{},EvDa=module.exports=function(){"use strict";var n=Array.prototype.slice,t=Object.prototype.toString,e=[].isArray||function(n){return"[object Array]"===t.call(n)},r=function(n){return!!(n&&n.constructor&&n.call&&n.apply)},o=function(n){return!!(""===n||n&&n.charCodeAt&&n.substr)},u=function(n){return"[object Number]"===t.call(n)},c=function(n){return o(n)||u(n)},i=function(n){return r(n)||o(n)||u(n)||e(n)?!1:null==n?"object"===String(n):"[object Object]"===t.call(n)||!0},a=function(t){return n.call(t)},l=[].forEach?function(n,t){if(c(n))return l([n],t);if(e(n)||n.length)a(n).forEach(t);else for(var r in n)t(r,n[r])}:function(n,t){if(c(n))return l([n],t);if(e(n))for(var r=0,o=n.length;o>r;r++)t(n[r],r);else for(var u in n)t(u,n[u])},f=function(n){return n.length?n[n.length-1]:void 0},s=function(n){var t=[];for(var e in n)t.push(n[e]);return t},v={}.keys||function(n){if(e(n))return n;var t=[];for(var r in n)t.push(r);return t},d=function(n,t){var e=[];return l(n,function(n){n!==t&&e.push(n)}),e},p=function(n){var t,e=[];return l(v(n).sort(),function(n){n!=t&&(t=n,e.push(n))}),e},h=function(n,t){var e=[];return l(n,function(n){t(n)&&e.push(n)}),e},x=function(n){return n&&"length"in n?n.length:0},g=[].map?function(n,t){return n.map(t)}:function(n,t){for(var e=[],r=0,o=n.length;o>r;r++)e.push(t(n[r],r));return e},y=function(t){return e(t)?n.call(t):i(t)?$(t,{}):t},$=function(t){return l(n.call(arguments,1),function(n){for(var e in n)void 0!==n[e]&&(t[e]=n[e])}),t},m=function(n){return n.match(/[?*]/)},b=function(n,t){return m(n)?h(v(t?t:data),function(t){return t.match(n)}):n},j=function(n,t){var r={};return e(n)?(l(n,function(n){r[n]=t(n)}),r):t(n)},w="first",_="on",k="after",A="test",D="or",E="set",O=[w,_,k,A,D],P={once:1},S=function(t){function c(n){if(n in B)return B[n];var t=n.split("."),e=t.pop(),r=t.join(".");if(r){var o=c(r);if(i(o)&&e in o)return o[e]}}function C(t,o,u,a){var f=n.call(arguments);if(0===f.length)return W;if(void 0===t)throw"Undefined passed in as first argument.";if(e(t))return f.shift(),g(t,function(n){return C.apply(C.context,[n].concat(f))});if(i(t)){if(1===f.length&&-1===t.constructor.toString().search(/{\s+\[native code\]\s+}/))return void(C.context=t);var s={};return a=u||{},u=o,a.noexec=1,l(t,function(n,t){s[n]=C(n,t,u,a)}),a.bypass||l(s,function(n,e){r(s[n])&&!r(t[n])&&(t[n]=s[n]())}),T(v(s)[0]),t}return 1===f.length?j(t,c):C[r(o)||e(o)&&r(o[0])?_:E].apply(this,f)}function F(n,t){Q[n]||(Q[n]=[]),Q[n].push([t,new Date]),Q[n].length>K&&Q[n].shift()}function L(n){l(n.$.ref,function(t){var e=m(t)?I:V;e[t]=d(e[t],n)})}function M(n,t,r){if(e(n)){var o=n.pop();return M(b(o),function(e,r){var o=1===n.length?n[0]:n;return M(o,t,r)},r)}if(i(n))return l(n,function(t,e){m(t)?$(t,j(t,function(n){return M(t,e,r)})):n[t]=M(t,e,r)}),n;var u=E+n;return V[u]&&(n in B||V[u](function(t){C.set.call(C.context,n,t,r)}),delete V[u]),t?n in B?t.call(C.context,B[n],r):C(n,t,$(r||{},P)):n in B}function N(n,t,e,r){if(!n.$.norun){r.order++;var o=n.call(t,e,r,r.meta);return n.once&&L(n),n.$.ix++,n.$.last=new Date,o}}function T(t){var e=t.split("."),r=e.pop(),o=[];o[r]=B[t],C.extend.apply(C.context,[e.join("."),o].concat(n.call(arguments,1)))}function U(n,t,r,o,c){c=c||0;var i=g(e(n)?n:[n],function(n){var e=u(B[n])?B[n]:c;return C.set(n,t(e,r),o)});return e(n)?i:i[0]}var q={},z={},B={},G={},H=[],I={},J=[],K=10,Q={},R={},V={},W={data:B,events:V,log:Q,locks:q,testLocks:z,last:R,trace:J,globs:I};return l(O,function(t){C[t]=function(u,c,i){if(e(c)){var a=n.call(arguments,2);return g(c,function(n){return C[t].apply(C.context,[u,n].concat(a))})}var f=V;return c?(c.$||(c.$={ref:[],ix:0,last:!1,line:[]}),c.$.ref.push(t+u),o(c.$.line)&&(c.$.line=[c.$.line]),c.$.line.push((new Error).stack),1===c.$.line.length&&(c.$.line=c.$.line[0]),m(u)&&(f=I),(f[t+u]||(f[t+u]=[])).push(c),l(O,function(t){t in c||(c[t]=function(e){var o=n.call(arguments);return r(e)&&(o=[u].concat(o)),"len"in c||(c[0]=c,c.len=0),c.len++,c[c.len]=C[t].apply(C.context,o),c})}),$(c,i)):f[t+u]}}),U.add=function(n,t){return n+t},$(C,{_:{},context:this,list:{},isPaused:!1,db:B,events:function(n,t){return t?V[t+n]:n?j(O.concat([E]),function(t){return V[t+n]}):V},del:L,whenSet:M,isset:M,pause:function(){return C.isPaused?!1:(C.isPaused=!0,C._.set=C.set,C.set=function(){H.push([E,arguments])},!0)},play:function(){if(C.isPaused){C.isPaused=!1;var n=S();return C.set=C._.set,l(H,function(t){n[t[0]].apply(n,t[1])}),H=[],C(n.db),!0}return!1},setter:function(n,t){return V[E+n]=t,V[_+n]?M(n):void 0},when:function(t,u,c){if(i(t)){var a={},f={},v=function(n,t){f[t.key]=!1,t()},d=function(t,e){f[e.key]=!0,-1===s(f).indexOf(!1)&&u.apply(C.context,n.call(arguments))};return l(t,function(n,t){a[n+"-test"]=C.test(n,v),a[n]=C.when(n,t,d),f[n]=!1}),a}if(o(u))try{var p=new Function("x","return x"+u);p(),u=p}catch(h){}else if(2===arguments.length)return C.isset(t,u);return C(t,function(t){(e(u)&&u.sort().join("")===t.sort().join("")||r(u)&&u(t)||t===u)&&c.apply(C.context,n.call(arguments))})},empty:function(n){if(0===arguments.length)for(var n in B)delete B[n];else l(arguments,function(n){n in B&&(e(B[n])?C.set(n,[],{},{bypass:1,noexec:1}):C.set(n,null,{},{bypass:1,noexec:1}))})},incr:function(n,t,e){var r=o(t)?new Function("val","return val"+t):U.add;return U(n,r,t||1,e)},decr:function(n,t,e){return t=t||1,U(n,U.add,-(t||1),e,1)},push:function(n,t,e){return C.set(n,[].concat(B[n]||[],[t]),e)},pop:function(n,t){return C.set(n,B[n].slice(0,-1),t)},group:function(n){var t=a(arguments),n=t.shift(),e=C.apply(0,t);return C.list[n]||(C.list[n]=[]),r(e)?C.list[n].push(e):l(e,function(t,e){C.list[n].push(t)}),function(){return C.group.apply(0,[n].concat(a(arguments)))}},extend:function(t,e){return C.set.apply(C.context,[t,$({},B[t]||{},e)].concat(n.call(arguments,2)))},count:function(n){return 0===arguments.length?Math.max.apply(this,s(G)):G[n]},setContext:function(n){C.context=n},set:function(t,e,r,o){o=o||{};var u,c=o.bypass,i=o.coroutine||function(){return!0},a="value"in o,f=o.noexec;if(1===arguments.length){var s=function(){C.set.apply(C.context,[t].concat(n.call(arguments)))};return C.set.call(C.context,t,void 0),s}if(q[t]>0)return l(J,function(n){n.call(C.context,$({locked:t},h))}),B[t];q[t]=(q[t]||0)+1;try{var v,d,p=A+t,h=n.call(arguments),g=x(V[p]),m=0,b=g&&!c,j=function(){l(V[D+t]||[],function(n){N(n,C.context,a?o.value:E.value,E)})},E=b?function(n){var e;return d|=n===!1,--g?(m++,i(E,!1)?(e=N(V[p][m],C.context,a?o.value:E.value,E),e!==!0&&e!==!1||E(e)):j()):d?j():i(E,!0)?C.set(t,E.value,E.meta,{bypass:1,order:E.order}):j(),n}:{};if(E.old=y(B[t]),$(E,{order:"order"in o?o.order:-1,meta:r||{},done:E,result:E,key:t,value:e}),b)q[t]--,z[t]!==!0&&(z[t]=!0,i(E,!1)?(u=N(V[p][m],C.context,a?o.value:E.value,E),u!==!0&&u!==!1||E(u)):j(),z[t]=!1),v=B[t];else if(l(J,function(n){n.call(C.context,h)}),i(E,!0)&&(e=E.value,!o.onlychange||e!==B[t])){o.noset||(F(t,e),B[t]=e,""!=t&&(G[t]=(G[t]||0)+1));var O=arguments,P=function(){return l((V[w+t]||[]).concat(V[_+t]||[]),function(n){E.last=N(n,C.context,e,E)}),t.length>0&&(delete o.coroutine,T.apply(C.context,[t].concat(n.call(O,2)))),l(V[k+t]||[],function(n){E.last=N(n,C.context,e,E)}),R[t]=E.last,e};f?(T.apply(C.context,[t].concat(n.call(O,2))),v=P):v=P.call(C.context)}}catch(S){throw S}finally{q[t]=0}return v},fire:function(n,t){l(n,function(n){C.set(n,B[n],t,{noset:!0})})},once:function(n,t,r){return i(n)&&(n=s(n)),e(n)?g(n,function(n){C.once.call(C.context,n,t,r)}):t?C.once(C(n,t,r)):$(n,P)},enable:function(n){return l(C.list[n],function(t){t.$.norun&&t.$.norun[n]&&delete t.$.norun[n],0===x(t.$.norun)&&delete t.$.norun}),C.list[n]},osetadd:function(n,t,r){var o=B[n]||[];return C(n,t,r,{coroutine:function(n,r){var u=e(n.value)?n.value:[n.value];return n.set=y(o),l(u,function(t){-1===n.set.indexOf(t)&&n.set.push(t)}),r&&(n.value=n.set),n.oper={name:"osetadd",value:t},o.length!=n.set.length}})},setadd:function(n,t,r){var o=B[n]||[];return C(n,t,r,{coroutine:function(n,r){var u=e(n.value)?n.value:[n.value];return n.set=p(o.concat(u)),r&&(n.value=n.set),n.oper={name:"setadd",value:t},o.length!=n.set.length}})},settoggle:function(n,t,e){var r=-1===(B[n]||[]).indexOf(t)?"add":"del";return C[E+r](n,t,e)},setdel:function(n,t,e){var r=B[n]||[],o=d(r,t);return r.length!=o.length?C(n,o,e,{coroutine:function(n,e){return e&&(n.oper={name:"setdel",value:t}),!0},value:t}):o},disable:function(n){return l(C.list[n],function(t){(t.$.norun||(t.$.norun={}))[n]=!0}),C.list[n]},unset:function(){var n=!0;return l(arguments,function(t){n&=t in B;var e,r,o,u=t.split("."),c="",i=u.length,a=u[i-1];for(e=0;i>e;e++)if(c=u.slice(0,e).join("."),o=B[c]){for(r=e;i-1>r;r++)o=o[u[r]];delete o[a]}delete B[t]}),n},find:function(n){return h(v(B),function(t){return t.match(n)})},changed:function(n,t){return C.on(n,function(n,e){var r=x(n),o=x(e.old);r-o===1?t.call(C.context,f(n)):r>o&&t.call(C.context,a(n).slice(o))})},sniff:function(){var t={"":1},e=function(n){return t[n[0]]||console.log(n)},r=function(){},u=e;return J.unshift(function(n){u(n)}),C.sniff=function(){var c=n.call(arguments),i=[];return l(c,function(n){o(n)?(t[n]?delete t[n]:t[n]=1,i.push([n,t[n]])):(u=n?e:r,i.push(n))}),c.length?i:v(t)},C.sniff.apply(C.context,arguments)}}),C.setAdd=C.setadd,C.setToggle=C.settoggle,C.osetAdd=C.osetadd,C.osetdel=C.setdel,C.osetDel=C.setdel,C.setDel=C.setdel,C.isSet=C.isset,C.mod=C.incr,C.get=C,C.change=C.on,C.add=C.push,l(S._ext,function(t,e){C[t]=function(){e.apply(C.context,[C].concat(n.call(arguments)))}}),arguments.length>0&&C(t),C};return S._ext={},S.extend=function(n,t){S._ext[n]=t},S.isArray=e,S}();EvDa.__version__="0.1-versioning-added-136-g98c6093";
//# sourceMappingURL=evda.map.js
